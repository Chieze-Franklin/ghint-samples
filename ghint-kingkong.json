{
    "options": {
        "detectPull": true
    },
    "checks": {
        "There should be a 'server' folder in root directory": "!!(tree.tree.find(t => t.path === 'server' && t.type === 'tree'))",
        "There should be a 'server/config' folder": "!!(tree.tree.find(t => t.path === 'server/config' && t.type === 'tree'))",
        "There should be a 'server/controllers' folder": "!!(tree.tree.find(t => t.path === 'server/controllers' && t.type === 'tree'))",
        "There should be a 'server/fixtures' folder": "!!(tree.tree.find(t => t.path === 'server/fixtures' && t.type === 'tree'))",
        "There should be a 'server/helpers' folder": "!!(tree.tree.find(t => t.path === 'server/helpers' && t.type === 'tree'))",
        "There should be a 'server/middlewares' folder": "!!(tree.tree.find(t => t.path === 'server/middlewares' && t.type === 'tree'))",
        "There should be a 'server/migrations' folder": "!!(tree.tree.find(t => t.path === 'server/migrations' && t.type === 'tree'))",
        "There should be a 'server/models' folder": "!!(tree.tree.find(t => t.path === 'server/models' && t.type === 'tree'))",
        "There should be a 'server/routes' folder": "!!(tree.tree.find(t => t.path === 'server/routes' && t.type === 'tree'))",
        "There should be a 'server/tests' folder": "!!(tree.tree.find(t => t.path === 'server/tests' && t.type === 'tree'))",
        "Branch name format should be: {story type}-{story summary}-{pivotal tracker id}": {
            "script": "/^((ft-)|(ch-)|(bg-))[a-z0-9\\-]+[\\d]+$/.test(branch.name)",
            "message": [
                "Branches created should be named using the following format:",
                "{story type}-{2-3 word summary}-{pivotal tracker id}",
                "    * bg = Bug",
                "    * ch = Chore",
                "    * ft = Feature",
                "",
                "Example: ft-resources-rest-endpoints-111504508"
            ]
        },
        "Commit message should consist of header, body, footer": {
            "script": [
                "const message = commit.commit.message.trim()",
                "const messageLines = message.split('\\n')",
                "const len = messageLines.length",
                "if (len >= 5) {",
                "   if (messageLines[0].trim() !== '' && messageLines[1].trim() === '' && messageLines[2].trim() !== ''",
                "   && messageLines[len - 1].trim() !== '' && messageLines[len - 2].trim() === '' && messageLines[len - 3].trim() !== '') {",
                "       return true;",
                "   }",
                "}",
                "return false;"
            ],
            "message": "A commit message consists of a header, a body and a footer, separated by blank lines."
        },
        "Commit message should not have lines longer than 100 characters": {
            "script": [
                "const message = commit.commit.message.trim()",
                "const messageLines = message.split('\\n')",
                "return !(messageLines.find(line => line.length > 100));"
            ],
            "message": [
                "Any line of the commit message cannot be longer than 100 characters!",
                "This allows the message to be easier to read on github as well as in various git tools."
            ]
        },
        "Commit message header format should be: {type}({scope}): {subject}": {
            "script": [
                "const message = commit.commit.message.trim()",
                "const messageLines = message.split('\\n')",
                "if (messageLines.length >= 5) {",
                "   const header = messageLines[0]",
                "   return /^(bug|chore|docs|feat|fix|refactor|release|style|test)\\([\\w\\s-]+\\):\\s*.+$/.test(header)",
                "}",
                "return false;"
            ],
            "message": [
                "The message header is a single line that contains succinct description",
                "of the change containing a type, a scope and a subject.",
                "",
                "This describes the kind of change that this commit is providing.",
                "  * feat (feature)",
                "  * fix (bug fix)",
                "  * chore (maintain)",
                "  * docs (documentation)",
                "  * style (formatting, missing semi colons, â€¦)",
                "  * refactor",
                "  * release",
                "  * test"
            ]
        },
        "Commit message footer format should be: [(Starts|Finishes|Fixes|Delivers) #TRACKER_STORY_ID]": {
            "skip": true,
            "script": [
                "const message = commit.commit.message.trim()",
                "const messageLines = message.split('\\n')",
                "if (messageLines.length >= 5) {",
                "   const footer = messageLines[messageLines.length - 1]",
                "   return /^\\[([Ss]tarts|[Ff]inishes|[Ff]ixes|[Dd]elivers|[Cc]hores)\\s*(#[0-9]+[,]?\\s*)+]$/.test(footer)",
                "}",
                "return false;"
            ],
            "message": [
                "Finished, fixed or delivered stories should be listed in the footer",
                "prefixed with 'Starts', 'Finishes', 'Fixes' , 'Delivers', or 'Chores' keyword like this:",
                "",
                "[Finishes #1234567]",
                "",
                "or in a case of multiple stories:",
                "[Finishes #0001234, #0123456, #12345678]"
            ]
        }
    }
}